--- origsrc/vlc-0.9.0-test2/modules/access/udp.c	2008-07-05 06:34:48.000000000 -0500
+++ src/vlc-0.9.0-test2/modules/access/udp.c	2008-07-17 23:20:57.078125000 -0500
@@ -109,9 +109,11 @@
                 fam = AF_INET;
                 break;
 
+#ifdef AF_INET6
             case '6':
                 fam = AF_INET6;
                 break;
+#endif
         }
     }
 
--- origsrc/vlc-0.9.0-test2/modules/services_discovery/sap.c	2008-07-11 15:12:52.000000000 -0500
+++ src/vlc-0.9.0-test2/modules/services_discovery/sap.c	2008-07-17 23:53:54.140625000 -0500
@@ -495,6 +495,7 @@
         InitSocket( p_sd, SAP_V4_LOCAL_ADDRESS, SAP_PORT );
         InitSocket( p_sd, SAP_V4_LINK_ADDRESS, SAP_PORT );
     }
+#ifndef __CYGWIN__
     if( var_CreateGetInteger( p_sd, "sap-ipv6" ) )
     {
         char psz_address[NI_MAXNUMERICHOST] = "ff02::2:7ffe%";
@@ -544,6 +545,7 @@
             InitSocket( p_sd, psz_address, SAP_PORT );
         }
     }
+#endif /* __CYGWIN__ */
 
     psz_addr = var_CreateGetString( p_sd, "sap-addr" );
     if( psz_addr && *psz_addr )
--- origsrc/vlc-0.9.0-test2/modules/stream_out/standard.c	2008-07-05 06:34:51.000000000 -0500
+++ src/vlc-0.9.0-test2/modules/stream_out/standard.c	2008-07-18 00:09:34.984375000 -0500
@@ -397,6 +397,7 @@
     }
     msg_Dbg( p_stream, "mux opened" );
 
+#ifndef __CYGWIN__  /* getaddrinfo */
     /* *** Create the SAP Session structure *** */
     if( var_GetBool( p_stream, SOUT_CFG_PREFIX"sap" ) )
     {
@@ -457,6 +458,7 @@
         }
         free (dhost);
     }
+#endif /* __CYGWIN__ */
 
     p_stream->pf_add    = Add;
     p_stream->pf_del    = Del;
--- origsrc/vlc-0.9.0-test2/src/misc/threads.c	2008-07-11 16:01:53.000000000 -0500
+++ src/vlc-0.9.0-test2/src/misc/threads.c	2008-07-17 22:36:02.265625000 -0500
@@ -104,7 +104,7 @@
 
     /* Sometimes strerror_r() crashes too, so make sure we print an error
      * message before we invoke it */
-#ifdef __GLIBC__
+#if defined(__GLIBC__) || defined(__CYGWIN__)
     /* Avoid the strerror_r() prototype brain damage in glibc */
     errno = error;
     fprintf (stderr, " Error message: %m at:\n");
--- origsrc/vlc-0.9.0-test2/src/network/udp.c	2008-06-27 10:01:28.000000000 -0500
+++ src/vlc-0.9.0-test2/src/network/udp.c	2008-07-17 23:16:27.125000000 -0500
@@ -94,6 +94,16 @@
 # define UDPLITE_RECV_CSCOV     11
 #endif
 
+/* http://www.cygwin.com/ml/cygwin/2007-01/msg00523.html */
+#ifdef __CYGWIN__
+# define if_nametoindex( str ) atoi( str )
+struct ip_mreq_source {
+	struct  in_addr imr_multiaddr;
+	struct  in_addr imr_sourceaddr;
+	struct  in_addr imr_interface;
+};
+#endif
+
 extern int net_Socket( vlc_object_t *p_this, int i_family, int i_socktype,
                        int i_protocol );
 
--- origsrc/vlc-0.9.0-test2/src/stream_output/sap.c	2008-06-27 10:01:28.000000000 -0500
+++ src/vlc-0.9.0-test2/src/stream_output/sap.c	2008-07-17 19:57:47.937500000 -0500
@@ -265,7 +265,7 @@
 
     switch( p_session->addr.ss_family )
     {
-#if defined (HAVE_INET_PTON) || defined (WIN32)
+#if defined (AF_INET6) || defined (WIN32)
         case AF_INET6:
         {
             /* See RFC3513 for list of valid IPv6 scopes */
